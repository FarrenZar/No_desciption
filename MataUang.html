<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IndoExplore - Penukaran Mata Uang</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet" />
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet" />

    <link href="https://cdn.jsdelivr.net/npm/tom-select@2.3.1/dist/css/tom-select.bootstrap5.css" rel="stylesheet" />

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet" />
</head>
<style>
    body {
        font-family: 'Poppins', sans-serif;
        background-image: url('https://media.istockphoto.com/id/1325082460/id/foto/matahari-terbenam-yang-cerah-dan-indah-awan-diterangi-oleh-sinar-cahaya-terakhir-menciptakan.jpg?s=612x612&w=0&k=20&c=5sNruJD6jN8BVYiivGi4GgFgKd1u4MaI4BeFDkf0fx8=');
        background-size: cover;
        background-position: center;
        background-attachment: fixed;
        color: #ffffff;
        overflow-x: hidden;
    }

    /* === BAGIAN DARI SIDEBAR ANDA (TETAP SAMA) === */
    .sidebar {
        position: fixed;
        top: 20px;
        left: 20px;
        bottom: 20px;
        width: 260px;
        z-index: 1000;
        padding: 1.5rem;
        transition: width 0.3s ease;
        background: rgba(255, 255, 255, 0.08);
        backdrop-filter: blur(20px);
        -webkit-backdrop-filter: blur(20px);
        border: 1px solid rgba(255, 255, 255, 0.15);
        border-radius: 20px;
        box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.3);
        display: flex;
        flex-direction: column;
    }

    .sidebar-header {
        font-size: 1.5rem;
        font-weight: 600;
        text-align: center;
        margin-bottom: 2rem;
        color: #fff;
    }

    .sidebar .nav-link {
        color: rgba(255, 255, 255, 0.8);
        font-size: 1rem;
        padding: 0.75rem 1rem;
        margin-bottom: 0.5rem;
        border-radius: 10px;
        transition: all 0.3s ease;
    }

    .sidebar .nav-link i {
        margin-right: 1rem;
        width: 20px;
        text-align: center;
    }

    .sidebar .nav-link:hover,
    .sidebar .nav-link.active {
        background: rgba(255, 255, 255, 0.2);
        color: #fff;
        transform: translateX(5px);
    }

    /* === STYLE BARU UNTUK KONTEN === */
    .glass-panel {
        background: rgba(255, 255, 255, 0.1);
        backdrop-filter: blur(15px);
        -webkit-backdrop-filter: blur(15px);
        border: 1px solid rgba(255, 255, 255, 0.2);
        border-radius: 16px;
        box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);
    }

    .sidebar-footer {
        display: flex;
        align-items: center;
        gap: 1rem;
        /* Jarak antara foto dan nama */
        margin-top: 2rem;
        /* Jarak dari menu nav di atasnya */
        padding-top: 1.5rem;
        /* Jarak di dalam footer */
        border-top: 1px solid rgba(255, 255, 255, 0.2);
        /* Garis pemisah */
    }

    .profile-pic {
        flex-shrink: 0;
        /* Jangan sampai fotonya gepeng */
        width: 40px;
        height: 40px;
        border-radius: 50%;
        /* Membuatnya bulat */
        background: rgba(255, 255, 255, 0.2);
        display: flex;
        align-items: center;
        justify-content: center;
        color: #fff;
        font-size: 1.2rem;
        /* Ukuran ikon placeholder */
    }

    .profile-name {
        color: #fff;
        font-weight: 600;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
    }

    .main-content {
        padding-left: 280px;
        padding-top: 20px;
        padding-right: 20px;
        padding-bottom: 20px;
        transition: padding-left 0.3s ease;
        width: 100%;
    }

    .converter-panel {
        padding: 2.5rem;
        /* [DIUBAH] Menghapus max-width dan margin auto agar 'full-width' */
    }

    .converter-panel h2 {
        font-weight: 600;
        margin-bottom: 2rem;
        text-align: center;
    }

    .converter-body {
        display: flex;
        align-items: center;
        gap: 1.5rem;
    }

    .converter-group {
        flex: 1;
        display: flex;
        flex-direction: column;
    }

    .converter-group label {
        font-size: 0.9rem;
        margin-bottom: 0.5rem;
        color: rgba(255, 255, 255, 0.8);
    }

    /* [DIUBAH] Styling untuk input (tetap) dan Tom Select (baru) */
    .converter-group input,
    .ts-wrapper .ts-control {
        background-color: rgba(255, 255, 255, 0.1) !important;
        border: 1px solid rgba(255, 255, 255, 0.2) !important;
        color: #fff !important;
        border-radius: 8px;
        padding: 0.75rem;
        font-size: 1.2rem;
        font-weight: 600;
    }

    /* [BARU] Warna teks input di dalam Tom Select */
    .ts-wrapper .ts-control input {
        color: #fff;
        background: transparent;
    }

    .ts-wrapper .ts-control input::placeholder {
        color: rgba(255, 255, 255, 0.7);
    }

    .ts-wrapper.single .ts-control:after {
        border-color: rgba(255, 255, 255, 0.5) transparent transparent;
    }

    /* [BARU] Styling untuk dropdown menu 'glass' */
    .ts-dropdown {
        background: rgba(30, 30, 30, 0.8);
        /* Kaca gelap */
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.2);
        color: #fff;
    }

    .ts-dropdown .ts-option {
        color: #fff;
    }

    .ts-dropdown .ts-option.active,
    .ts-dropdown .ts-option:hover {
        background: rgba(255, 255, 255, 0.2);
        color: #fff;
    }

    .converter-group input::-webkit-outer-spin-button,
    .converter-group input::-webkit-inner-spin-button {
        -webkit-appearance: none;
        margin: 0;
    }

    /* Tombol Tukar (Swap) */
    #swap-btn {
        background: rgba(255, 255, 255, 0.2);
        border: 1px solid rgba(255, 255, 255, 0.3);
        color: #fff;
        border-radius: 50%;
        width: 50px;
        height: 50px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.5rem;
        cursor: pointer;
        transition: all 0.3s ease;
        margin-top: 1.5rem;
    }

    #swap-btn:hover {
        background: rgba(255, 255, 255, 0.4);
        transform: rotate(180deg);
    }

    #rate-display {
        text-align: center;
        margin-top: 2rem;
        font-size: 1.1rem;
        height: 30px;
    }

    #rate-display strong {
        color: #a5d8ff;
        font-weight: 600;
    }
    .converter-panel{
        margin-left: 10px;
    }

    @media (max-width: 992px) {
        .filter-bar {
            display: flex !important;
            flex-direction: row;
            gap: 1rem;
        }

        .filter-bar .col-lg-3 {
            width: 95%;
        }

        .filter-bar .col-lg-2 {
            width: 95%;
        }

        .filter-bar .col-lg-5 {
            width: 95%;
        }

        .Text_filter {
            display: grid;
            gap: 10px;
            flex: 1;
        }

        .sidebar-header span {
            font-size: 20px
        }

        /* Style untuk Carousel di mobile/tablet */
        #headerCarousel .carousel-item {
            height: 300px;
        }

        #headerCarousel .carousel-caption {
            bottom: 20px;
            left: 20px;
            right: 20px;
        }

        #headerCarousel .carousel-caption h2 {
            font-size: 1.5rem;
        }

        /* Style untuk Tombol FAB AI */
        .fab-ai {
            right: 30px;
        }
    }

    @media (max-width: 768px) {
        .converter-body {
            flex-direction: column;
            gap: 1rem;
        }

        #swap-btn {
            margin-top: 0;
            transform: rotate(90deg);
        }

        #swap-btn:hover {
            transform: rotate(270deg);
        }

        .main-content {
            padding-left: 20px;
        }

        .sidebar {
            display: none;
        }
    }
</style>

<body>
    <aside class="sidebar" data-aos="fade-right">
        <div class="sidebar-header">
            <i class="bi bi-compass-fill me-2"></i>
            IndoExplore
        </div>
        <nav class="nav flex-column">
            <a class="nav-link" href="index.html">
                <i class="bi bi-house-door-fill"></i>
                <span>Home</span>
            </a>
            <a class="nav-link active" href="#">
                <i class="bi bi-cash-coin"></i>
                <span>Penukaran Mata Uang</span>
            </a>
            <a class="nav-link" href="Donasi.html">
                <i class="bi bi-heart-fill"></i>
                <span>Penggalangan Dana</span>
            </a>
        </nav>
        <div class="sidebar-footer">
            <div class="profile-pic">
                <i class="bi bi-person-fill"></i>
            </div>
            <span class="profile-name">Username</span>
        </div>
    </aside>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const toggleBtn = document.getElementById('mobile-nav-toggle');
            const overlay = document.getElementById('sidebar-overlay');
            const sidebar = document.querySelector('.sidebar');

            if (toggleBtn) {
                toggleBtn.addEventListener('click', function () {
                    document.body.classList.add('sidebar-mobile-active');
                });
            }

            if (overlay) {
                overlay.addEventListener('click', function () {
                    document.body.classList.remove('sidebar-mobile-active');
                });
            }

            // Tutup menu saat link di-klik
            if (sidebar) {
                sidebar.addEventListener('click', function (e) {
                    if (e.target.tagName === 'A' || e.target.closest('A')) {
                        document.body.classList.remove('sidebar-mobile-active');
                    }
                });
            }
        });
    </script>
    <style>
        .sidebar-toggler {
            display: none;
            position: fixed;
            top: 20px;
            /* Jarak dari atas */
            left: 15px;
            /* Burger di kiri */
            z-index: 1050;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: #fff;
            width: 45px;
            height: 45px;
            border-radius: 8px;
            font-size: 1.5rem;
        }

        /* [BARU] Grup untuk quick links */
        .mobile-quick-links {
            display: none;
            /* Sembunyi di desktop */
            position: fixed;
            top: 20px;
            /* Jarak dari atas (sama dgn burger) */
            right: 15px;
            /* Ikon-ikon di kanan */
            z-index: 1050;
            flex-direction: row;
            /* [DIUBAH] Dibuat horizontal */
            gap: 10px;
            /* Jarak antar tombol */
        }

        /* [BARU] Styling untuk tombol quick link */
        .quick-link-btn {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: #fff;
            width: 45px;
            height: 45px;
            border-radius: 8px;
            font-size: 1.3rem;
            display: flex;
            align-items: center;
            justify-content: center;
            text-decoration: none;
            transition: background 0.2s ease;
        }

        .quick-link-btn.active,
        .quick-link-btn:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        /* [BARU] Overlay (Hanya satu) */
        #sidebar-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 1040;
        }


        /* [BLOK MEDIA QUERY YANG SUDAH DIPERBARUI] */
        @media (max-width: 768px) {
            .sidebar-toggler {
                display: block;
                /* Tampilkan burger */
            }

            .mobile-quick-links {
                display: flex;
                /* Tampilkan quick links */
            }

            /* [DIUBAH] Hapus display:none dan ganti dengan transform */
            .sidebar {
                display: flex !important;
                flex-direction: column !important;
                transform: translateX(-108%) !important;
                /* Paksa sembunyi */
                transition: transform 0.3s ease-in-out;
                z-index: 1060;
                width: 260px !important;
                /* Paksa lebar */
            }

            body.sidebar-mobile-active .sidebar {
                transform: translateX(0) !important;
                /* Paksa tampil */
            }

            body.sidebar-mobile-active #sidebar-overlay {
                display: block;
            }

            /* [DIUBAH] Paksa padding konten utama */
            .main-content {
                padding-left: 20px !important;
                padding-right: 20px !important;
            }

            /* (CSS ini untuk memperbaiki teks & ikon di dalam sidebar) */
            .sidebar .nav-link span {
                display: inline !important;
            }

            .sidebar .profile-name {
                display: inline !important;
            }

            .sidebar .nav-link i {
                display: inline-block !important;
                margin-right: 1rem !important;
                width: 20px !important;
            }
        }
    </style>



    <main class="main-content">
        <div class="container-fluid">
            <div class="converter-panel glass-panel" data-aos="fade-up">
                <button class="sidebar-toggler" type="button" id="mobile-nav-toggle">
                    <i class="bi bi-list"></i>
                </button>

                <div id="sidebar-overlay"></div>

                <div class="mobile-quick-links">
                    <a href="index.html" class="quick-link-btn">
                        <i class="bi bi-house-door-fill"></i>
                    </a>
                    <a href="MataUang.html" class="quick-link-btn active">
                        <i class="bi bi-cash-coin"></i>
                    </a>
                    <a href="Donasi.html" class="quick-link-btn">
                        <i class="bi bi-heart-fill"></i>
                    </a>
                </div><br><br>




                <h2><i class="bi bi-cash-coin me-2"></i> Konverter Mata Uang</h2>
                <p class="text-center text-white-50 mb-4">
                    Dapatkan kurs mata uang real-time. (Default: IDR ke USD)
                </p>

                <div class="converter-body">
                    <div class="converter-group">
                        <label for="from-currency">Dari</label>
                        <select id="from-currency" placeholder="Cari mata uang...">
                        </select>
                        <input type="number" id="from-amount" class="form-control mt-2" value="100000" min="0">
                    </div>

                    <button id="swap-btn" title="Tukar Mata Uang">
                        <i class="bi bi-arrow-left-right"></i>
                    </button>

                    <div class="converter-group">
                        <label for="to-currency">Ke</label>
                        <select id="to-currency" placeholder="Cari mata uang...">
                        </select>
                        <input type="number" id="to-amount" class="form-control mt-2" placeholder="Hasil" readonly>
                    </div>
                </div>

                <div id="rate-display">
                    Memuat kurs...
                </div>
            </div>

        </div>





        <style>
            .chart-placeholder {
                width: 100%;
                opacity: 0.8;
                margin-top: 1rem;
            }

            .cost-list {
                list-style: none;
                padding-left: 0;
                margin-top: 1rem;
            }

            .cost-list li {
                display: flex;
                justify-content: space-between;
                align-items: center;
                padding: 0.8rem 0;
                border-bottom: 1px solid rgba(255, 255, 255, 0.1);
                color: rgba(255, 255, 255, 0.9);
            }

            .cost-list li span {
                display: flex;
                align-items: center;
                gap: 0.75rem;
                font-size: 0.95rem;
            }

            .cost-list li i {
                font-size: 1.1rem;
                opacity: 0.7;
            }

            .cost-list li strong {
                font-weight: 600;
                color: #fff;
                font-size: 1rem;
            }

            .Tambahan {
                left: 20px;
                position: relative;
                width: 97%;
            }
        </style>
        <div class="Tambahan">
            <div class="row mt-4">
                <div class="col-lg-7 mb-4 mb-lg-0">
                    <div class="glass-panel p-4 h-100" data-aos="fade-up" data-aos-delay="100">
                        <h5><i class="bi bi-graph-up me-2"></i> Histori Kurs (7 Hari)</h5>
                        <p class="text-white-50 small">Pergerakan kurs IDR/USD.</p>

                        <div class="chart-placeholder">
                            <svg width="100%" height="150" viewBox="0 0 300 150" preserveAspectRatio="none">
                                <polyline fill="none" stroke="rgba(255, 255, 255, 0.8)" stroke-width="2" points="
                                    0,80 
                                    50,75 
                                    100,90 
                                    150,100 
                                    200,95 
                                    250,110 
                                    300,105">
                                </polyline>
                                <defs>
                                    <linearGradient id="chartGradient" x1="0%" y1="0%" x2="0%" y2="100%">
                                        <stop offset="0%" style="stop-color:rgba(255, 255, 255, 0.3)" />
                                        <stop offset="100%" style="stop-color:rgba(255, 255, 255, 0)" />
                                    </linearGradient>
                                </defs>
                                <polyline fill="url(#chartGradient)" stroke="none" points="
                                    0,150
                                    0,80 
                                    50,75 
                                    100,90 
                                    150,100 
                                    200,95 
                                    250,110 
                                    300,105
                                    300,150">
                                </polyline>
                            </svg>
                        </div>
                    </div>
                </div>
                <div class="col-lg-5">
                    <div class="glass-panel p-4 h-100" data-aos="fade-up" data-aos-delay="200">
                        <h5><i class="bi bi-tag-fill me-2"></i> Indikator Biaya</h5>
                        <p class="text-white-50 small">Perkiraan harga umum di Indonesia.</p>

                        <ul class="cost-list">
                            <li>
                                <span><i class="bi bi-cup-straw"></i> Kopi Lokal</span>
                                <strong>Rp 18.000</strong>
                            </li>
                            <li>
                                <span><i class="bi bi-egg-fried"></i> Nasi Goreng</span>
                                <strong>Rp 30.000</strong>
                            </li>
                            <li>
                                <span><i class="bi bi-bicycle"></i> Sewa Motor (Hari)</span>
                                <strong>Rp 75.000</strong>
                            </li>
                            <li>
                                <span><i class="bi bi-cloud-sun"></i> Tiket Wisata</span>
                                <strong>Rp 50.000</strong>
                            </li>
                        </ul>
                    </div>
                </div>

            </div>
        </div>
    </main>


    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script>
        AOS.init({
            duration: 800,
            once: true
        });
    </script>

    <script src="https://cdn.jsdelivr.net/npm/tom-select@2.3.1/dist/js/tom-select.complete.min.js"></script>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            // Ambil elemen DOM
            const fromAmountInput = document.getElementById('from-amount');
            const toAmountInput = document.getElementById('to-amount');
            const swapButton = document.getElementById('swap-btn');
            const rateDisplay = document.getElementById('rate-display');

            // API URL dari Frankfurter
            const API_URL = 'https://api.frankfurter.app';

            // [BARU] Inisialisasi Tom Select (Dropdown yang bisa dicari)
            const tomSelectSettings = {
                create: false, // Jangan izinkan pengguna membuat opsi baru
                sortField: {
                    field: "text",
                    direction: "asc" // Urutkan berdasarkan abjad
                }
            };
            const tomFrom = new TomSelect("#from-currency", tomSelectSettings);
            const tomTo = new TomSelect("#to-currency", tomSelectSettings);


            // 1. Fungsi untuk mengisi dropdown mata uang
            async function populateCurrencies() {
                try {
                    const response = await fetch(`${API_URL}/currencies`);
                    const currencies = await response.json();

                    rateDisplay.textContent = '';

                    // [DIUBAH] Hapus opsi lama dan tambahkan opsi baru ke Tom Select
                    tomFrom.clearOptions();
                    tomTo.clearOptions();

                    const options = [];
                    for (const [code, name] of Object.entries(currencies)) {
                        options.push({
                            value: code,
                            text: `${code} - ${name}`
                        });
                    }

                    tomFrom.addOptions(options);
                    tomTo.addOptions(options);

                    // Atur nilai default (Fokus ke Indonesia)
                    tomFrom.setValue('IDR');
                    tomTo.setValue('USD');

                    // Langsung hitung kurs awal
                    convertCurrency();

                } catch (error) {
                    console.error('Gagal memuat mata uang:', error);
                    rateDisplay.textContent = 'Gagal memuat mata uang.';
                }
            }

            // 2. Fungsi untuk menghitung konversi
            async function convertCurrency() {
                // [DIUBAH] Ambil nilai dari Tom Select
                const fromCode = tomFrom.getValue();
                const toCode = tomTo.getValue();
                let amount = parseFloat(fromAmountInput.value);

                if (isNaN(amount) || amount <= 0) {
                    amount = 1;
                    fromAmountInput.value = '1';
                }

                rateDisplay.textContent = 'Menghitung kurs...';
                toAmountInput.value = '...';

                try {
                    // Cek jika mata uang sama
                    if (fromCode === toCode) {
                        toAmountInput.value = amount.toFixed(2);
                        rateDisplay.innerHTML = `1 ${fromCode} = <strong>1.0000 ${toCode}</strong>`;
                        return;
                    }

                    const response = await fetch(`${API_URL}/latest?amount=${amount}&from=${fromCode}&to=${toCode}`);
                    const data = await response.json();

                    if (data.rates && data.rates[toCode]) {
                        const convertedAmount = data.rates[toCode];
                        toAmountInput.value = convertedAmount.toFixed(2);

                        const baseRate = convertedAmount / amount;
                        rateDisplay.innerHTML = `1 ${fromCode} = <strong>${baseRate.toFixed(4)} ${toCode}</strong>`;
                    } else {
                        rateDisplay.textContent = 'Kurs tidak tersedia.';
                    }

                } catch (error) {
                    console.error('Gagal melakukan konversi:', error);
                    rateDisplay.textContent = 'Gagal melakukan konversi.';
                }
            }

            // 3. Fungsi untuk menukar mata uang
            function swapCurrencies() {
                // [DIUBAH] Tukar nilai di Tom Select
                const tempCode = tomFrom.getValue();
                tomFrom.setValue(tomTo.getValue());
                tomTo.setValue(tempCode);

                convertCurrency();
            }

            // --- Event Listeners ---

            populateCurrencies();

            fromAmountInput.addEventListener('input', convertCurrency);

            // [DIUBAH] Dengarkan event 'change' dari Tom Select
            tomFrom.on('change', convertCurrency);
            tomTo.on('change', convertCurrency);

            swapButton.addEventListener('click', swapCurrencies);
        });
    </script>

</body>

</html>